# –ó–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ CoCon Connector

## üì° –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ Socket.IO

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ console.log –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ù–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–µ** (socketClient.js): –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º console.log –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Socket.IO
```javascript
const originalLog = console.log;
console.log = (...args) => {
  originalLog(...args); // Still log locally
  if (sock && sock.connected) {
    sock.emit('connector:log', {
      timestamp: new Date().toISOString(),
      message: args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : String(arg)).join(' ')
    });
  }
};
```

2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ** (server.cjs): –ü—Ä–∏–Ω–∏–º–∞–µ–º –∏ –≤—ã–≤–æ–¥–∏–º —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º [CONNECTOR]
```javascript
socket.on('connector:log', (data) => {
  const { timestamp, message } = data || {};
  console.log(`[CONNECTOR] ${timestamp} ${message}`);
});
```

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
pm2 logs voting-api --lines 0 | grep "\[CONNECTOR\]"
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω SSH/RDP –¥–æ—Å—Ç—É–ø –∫ –ü–ö
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π IP –∏–ª–∏ NAT –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ú–æ–∂–Ω–æ –¥–µ–±–∞–∂–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ Socket.IO —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞
timeout 120 pm2 logs voting-api --lines 0 2>&1 | grep -E "\[CONNECTOR\]" --line-buffered

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä —á–µ—Ä–µ–∑ Socket.IO
curl -X POST http://localhost:5000/api/start-vote -H "Content-Type: application/json" \
  -d '{"agendaItemId":14,"question":"Test","duration":30,"procedureId":2,"voteType":"OPEN"}'
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API
3. –ù–∞–±–ª—é–¥–∞—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
   - StartVoting, StopVoting –∫–æ–º–∞–Ω–¥—ã
   - GetIndividualVotingResults –≤—ã–∑–æ–≤—ã
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
   - –û—à–∏–±–∫–∏ CoCon API

## üìù TODO
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ª–æ–≥–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é (debug, info, error)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é –ª–æ–≥–æ–≤ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Socket.IO
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤ –ø–æ –∫–æ–º–∞–Ω–¥–µ
